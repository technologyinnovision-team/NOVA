{% extends "base.html" %}

{% block title %}{{ 'Edit Method' if method else 'Create Method' }}{% endblock %}

{% block content %}
<div class="p-6 max-w-4xl">
    <div class="mb-6">
        <a href="{{ url_for('shipping_admin.zones') }}" class="text-pink-500 hover:text-pink-400">
            <i class="fas fa-arrow-left mr-2"></i>Back to Zones
        </a>
    </div>

    <div class="bg-gray-800 rounded-lg p-6">
        <h1 class="text-2xl font-bold text-white mb-2">
            {{ 'Edit Method' if method else 'Create Method' }}
        </h1>
        <p class="text-gray-400 mb-6">Zone: {{ zone.name }}</p>

        <form method="POST">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Method Title</label>
                    <input type="text" name="title" required value="{{ method.title if method else '' }}"
                        class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500"
                        placeholder="e.g., Flat Rate Shipping, Free Shipping">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Method Type</label>
                    <select name="method_id"
                        class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500">
                        <option value="flat_rate" {{ 'selected' if method and method.method_id=='flat_rate' else '' }}>
                            Flat Rate</option>
                        <option value="free_shipping" {{ 'selected' if method and method.method_id=='free_shipping'
                            else '' }}>Free Shipping</option>
                        <option value="local_pickup" {{ 'selected' if method and method.method_id=='local_pickup'
                            else '' }}>Local Pickup</option>
                    </select>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Cost</label>
                        <input type="number" name="cost" step="0.01" min="0" required
                            value="{{ method.cost if method else '0.00' }}"
                            class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500"
                            placeholder="0.00">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Minimum Amount (Optional)</label>
                        <input type="number" name="min_amount" step="0.01" min="0"
                            value="{{ method.min_order_amount if method and method.min_order_amount else '' }}"
                            class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500"
                            placeholder="Leave empty for no minimum">
                        <p class="text-xs text-gray-400 mt-1">Cart total required for this method</p>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Method Order</label>
                    <input type="number" name="method_order" min="0" value="{{ method.order if method else 0 }}"
                        class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500"
                        placeholder="0">
                    <p class="text-xs text-gray-400 mt-1">Lower numbers appear first</p>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Tax Status</label>
                    <select name="tax_status"
                        class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500">
                        <option value="taxable" {{ 'selected' if method and method.tax_status=='taxable' else '' }}>
                            Taxable</option>
                        <option value="none" {{ 'selected' if method and method.tax_status=='none' else '' }}>None
                        </option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Requirements (Optional)</label>
                    <textarea name="requirements" rows="3"
                        class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500"
                        placeholder="e.g., requires_coupon, min_weight">{{ method.requirements if method else '' }}</textarea>
                </div>

                <div class="flex items-center">
                    <input type="checkbox" name="enabled" id="enabled" {{ 'checked' if method and method.enabled
                        else 'checked' }}
                        class="w-4 h-4 text-pink-600 bg-gray-700 border-gray-600 rounded focus:ring-pink-500">
                    <label for="enabled" class="ml-2 text-sm text-gray-300">Enable this shipping method</label>
                </div>

                <div class="flex gap-3 pt-4">
                    <button type="submit"
                        class="px-6 py-2 bg-pink-600 hover:bg-pink-700 text-white rounded-lg transition-colors">
                        <i class="fas fa-save mr-2"></i>Save Method
                    </button>
                    <a href="{{ url_for('shipping_admin.zones') }}"
                        class="px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                        Cancel
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}