{% set product = item.product %}
<tr id="product-row-{{ product.id }}" class="hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors">
    <td class="px-4 py-4 whitespace-nowrap">
        <input type="checkbox" name="product_ids[]" value="{{ product.id }}"
            class="product-checkbox w-4 h-4 rounded border-gray-300 dark:border-gray-700 bg-white dark:bg-black text-gold focus:ring-gold">
    </td>
    <td class="px-4 py-4 whitespace-nowrap">
        {% if product.primary_image %}
        <img src="{{ product.primary_image }}" alt="{{ product.title }}"
            class="w-12 h-12 object-cover rounded border border-gray-200 dark:border-gray-700">
        {% else %}
        <div
            class="w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded flex items-center justify-center text-gray-400 dark:text-gray-600 text-xs border border-gray-200 dark:border-gray-700">
            No Image</div>
        {% endif %}
    </td>
    <td class="px-4 py-4 min-w-[200px] text-sm font-medium text-gray-900 dark:text-white">{{ product.title }}</td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 font-mono">{{ product.sku or '-' }}
    </td>
    <td class="px-4 py-4 whitespace-nowrap text-sm">
        {% if item.is_variable %}
        {% if item.price_range %}
        <span class="text-gold font-medium">{{ item.price_range }}</span>
        <span class="ml-2 text-xs text-gray-500 dark:text-gray-400">(Variable)</span>
        {% else %}
        <span class="text-gray-500 dark:text-gray-400 italic">Variable Pricing</span>
        {% endif %}
        {% elif product.on_sale and product.sale_price %}
        <span class="text-gray-400 dark:text-gray-500 line-through mr-2">${{ "%.2f"|format(product.regular_price)
            }}</span>
        <span class="text-pink font-medium">${{ "%.2f"|format(product.sale_price) }}</span>
        {% else %}
        <span class="text-gold font-medium">${{ "%.2f"|format(product.regular_price) }}</span>
        {% endif %}
    </td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
        {% if product.manage_stock %}
        {{ product.stock_quantity }}
        {% else %}
        <span class="px-2 py-1 text-xs rounded-full bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400">{{
            product.stock_status|replace('_', ' ')|title }}</span>
        {% endif %}
    </td>
    <td class="px-4 py-4 whitespace-nowrap">
        <span
            class="px-2 py-1 text-xs rounded-full {% if product.status == 'published' %}bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400{% elif product.status == 'draft' %}bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400{% elif product.status == 'coming_soon' %}bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-400{% else %}bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400{% endif %}">
            {{ product.status|title|replace('_', ' ') }}
        </span>
        {% if product.featured %}<span
            class="ml-2 px-2 py-1 text-xs rounded-full bg-gold/20 dark:bg-gold/20 text-gold">Featured</span>{% endif %}
    </td>
    <td class="px-4 py-4 text-sm">
        <div class="flex flex-col sm:flex-row gap-2 sm:gap-0 sm:space-x-2">
            <button onclick="toggleFeatured({{ product.id }}, this)"
                class="px-2 sm:px-3 py-1 sm:py-1.5 rounded-md text-xs font-medium transition-all duration-200 whitespace-nowrap {% if product.featured %}bg-gold text-white hover:bg-gold/80{% else %}bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600{% endif %}"
                title="{% if product.featured %}Remove from featured{% else %}Mark as featured{% endif %}">
                {% if product.featured %}★ Featured{% else %}☆ Feature{% endif %}
            </button>
            <div class="flex gap-2 sm:gap-0 sm:space-x-2">
                <button type="button" onclick='openQuickEdit({
                        id: {{ product.id }},
                        title: {{ product.title|tojson }},
                        slug: {{ product.slug|tojson }},
                        status: "{{ product.status }}",
                        sku: {{ (product.sku or "")|tojson }},
                        regular_price: "{{ product.regular_price }}",
                        sale_price: "{{ product.sale_price or "" }}",
                        stock_quantity: {{ product.stock_quantity }},
                        manage_stock: {{ "true" if product.manage_stock else "false" }},
                        categories: [{% for c in product.categories %}{{ c.id }}{% if not loop.last %},{% endif %}{% endfor %}]
                    })'
                    class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 text-xs sm:text-sm whitespace-nowrap">
                    Quick Edit
                </button>
                <a href="{{ url_for('products.edit', id=product.id) }}"
                    class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-xs sm:text-sm whitespace-nowrap">Edit</a>
                <form method="POST" action="{{ url_for('products.delete', id=product.id) }}" class="inline"
                    onsubmit="return confirm('Are you sure you want to delete this product?');">
                    <button type="submit"
                        class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-xs sm:text-sm whitespace-nowrap">Delete</button>
                </form>
            </div>
        </div>
    </td>
</tr>