{% extends "base.html" %}

{% block title %}Integrations - Admin Panel{% endblock %}

{% block page_title %}Integrations{% endblock %}

{% block content %}
<div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg shadow-sm dark:shadow-none transition-theme">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-800">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Integrations</h2>
        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Manage custom code injection and API integrations</p>
    </div>
    
    <form method="POST" class="p-6 space-y-6">
        <!-- Custom Code Injection Section -->
        <div>
            <div class="mb-4">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1">Custom Code Injection</h3>
                <p class="text-xs text-gray-600 dark:text-gray-400">Inject custom HTML/JavaScript code into your website</p>
            </div>
            
            <div class="bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg p-4 space-y-4">
                <div>
                    <label for="header_code" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Header Code</label>
                    <p class="text-xs text-gray-500 dark:text-gray-500 mb-2">Code to be inserted in the &lt;head&gt; section</p>
                    <textarea id="header_code" name="header_code" rows="6" placeholder="<!-- Code for &lt;head&gt; section -->" class="w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-sm transition-theme">{{ header_code }}</textarea>
                </div>
                
                <div>
                    <label for="body_code" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Body Code</label>
                    <p class="text-xs text-gray-500 dark:text-gray-500 mb-2">Code to be inserted right after &lt;body&gt; tag</p>
                    <textarea id="body_code" name="body_code" rows="6" placeholder="<!-- Code after &lt;body&gt; -->" class="w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-sm transition-theme">{{ body_code }}</textarea>
                </div>
                
                <div>
                    <label for="footer_code" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Footer Code</label>
                    <p class="text-xs text-gray-500 dark:text-gray-500 mb-2">Code to be inserted before &lt;/body&gt; tag</p>
                    <textarea id="footer_code" name="footer_code" rows="6" placeholder="<!-- Code before &lt;/body&gt; -->" class="w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-sm transition-theme">{{ footer_code }}</textarea>
                </div>
            </div>
        </div>
        
        <!-- Direct & API Integrations Section -->
        <div class="pt-6 border-t border-gray-200 dark:border-gray-800">
            <div class="mb-4">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1">Direct & API Integrations</h3>
                <p class="text-xs text-gray-600 dark:text-gray-400">These integrations connect via APIs or require server-side configuration</p>
            </div>
            
            <div class="space-y-4">
                <!-- Google Merchant Center -->
                <div class="bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg p-4 hover:border-gold/30 transition-theme shadow-sm dark:shadow-none">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center font-bold text-white text-xs">GMC</div>
                            <div>
                                <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Google Merchant Center</h3>
                            </div>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" name="google_merchant_center_enabled" id="google_merchant_center_enabled" {% if integrations.google_merchant_center.enabled %}checked{% endif %} class="sr-only peer">
                            <div class="w-9 h-5 bg-gray-300 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gold rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pink"></div>
                        </label>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <div>
                            <label for="gmc_merchant_id" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Merchant ID</label>
                            <input type="text" id="gmc_merchant_id" name="gmc_merchant_id" value="{{ integrations.google_merchant_center.config.merchant_id if integrations.google_merchant_center.config else '' }}" placeholder="Merchant ID" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold text-xs transition-theme">
                        </div>
                        <div>
                            <label for="gmc_feed_url" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Feed URL</label>
                            <input type="url" id="gmc_feed_url" name="gmc_feed_url" value="{{ integrations.google_merchant_center.config.feed_url if integrations.google_merchant_center.config else '' }}" placeholder="https://..." class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                        </div>
                        <div>
                            <label for="gmc_access_token" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Access Token (Optional)</label>
                            <input type="password" id="gmc_access_token" name="gmc_access_token" placeholder="{% if integrations.google_merchant_center.config and integrations.google_merchant_center.config.access_token %}Enter new token{% else %}Enter token{% endif %}" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                        </div>
                    </div>
                </div>
                
                <!-- Microsoft Charity -->
                <div class="bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg p-4 hover:border-gold/30 transition-theme shadow-sm dark:shadow-none">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                            </div>
                            <div>
                                <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Microsoft Charity</h3>
                            </div>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" name="microsoft_charity_enabled" id="microsoft_charity_enabled" {% if integrations.microsoft_charity.enabled %}checked{% endif %} class="sr-only peer">
                            <div class="w-9 h-5 bg-gray-300 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gold rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pink"></div>
                        </label>
                    </div>
                </div>
                
                <!-- Product Catalogs Subsection -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-800">
                    <div class="mb-3">
                        <h4 class="text-base font-semibold text-gray-900 dark:text-white mb-1">Product Catalogs</h4>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Sync products with advertising platforms</p>
                    </div>
                    
                    <div class="space-y-4">
                        <!-- TikTok Catalog -->
                        <div class="bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg p-4 hover:border-gold/30 transition-theme shadow-sm dark:shadow-none">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-black dark:bg-white rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-white dark:text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.08 4.56 0 0 .91 2.96 2.48 3.88 0 0 2.67 1.12 5.97 1.12v3.95c-1.93 0-3.49 0-4.74-.02-.66-2.67-1.39-4.67-2.78-5.75 0 0 1.56-.59 2.68-.59 1.05 0 2.01.05 2.97.07.04 1.51.05 3.03.05 4.55 0 1.53-.01 3.06-.05 4.58h-.02c-.95.02-1.92.07-2.97.07-1.05 0-2.01-.05-2.97-.07h-.02c-1.39-1.08-2.78-3.08-4.74-5.75v3.95c-3.3 0-5.97-1.12-5.97-1.12-1.57-.92-2.48-3.88-2.48-3.88-.45-1.47-1-3.03-1.08-4.56 1.3.01 2.6-.01 3.91.02z"/></svg>
                                    </div>
                                    <div>
                                        <h3 class="text-sm font-semibold text-gray-900 dark:text-white">TikTok Catalog</h3>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="tiktok_catalog_enabled" id="tiktok_catalog_enabled" {% if integrations.tiktok_catalog.enabled %}checked{% endif %} class="sr-only peer">
                                    <div class="w-9 h-5 bg-gray-300 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gold rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pink"></div>
                                </label>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div>
                                    <label for="tiktok_catalog_id" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Catalog ID</label>
                                    <input type="text" id="tiktok_catalog_id" name="tiktok_catalog_id" value="{{ integrations.tiktok_catalog.config.catalog_id if integrations.tiktok_catalog.config else '' }}" placeholder="Catalog ID" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                                <div>
                                    <label for="tiktok_access_token" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Access Token</label>
                                    <input type="password" id="tiktok_access_token" name="tiktok_access_token" placeholder="{% if integrations.tiktok_catalog.config and integrations.tiktok_catalog.config.access_token %}Enter new token{% else %}Enter token{% endif %}" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                                <div>
                                    <label for="tiktok_app_id" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">App ID (Optional)</label>
                                    <input type="text" id="tiktok_app_id" name="tiktok_app_id" value="{{ integrations.tiktok_catalog.config.app_id if integrations.tiktok_catalog.config else '' }}" placeholder="App ID" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Facebook Catalog -->
                        <div class="bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg p-4 hover:border-gold/30 transition-theme shadow-sm dark:shadow-none">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-blue-700 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                                    </div>
                                    <div>
                                        <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Facebook Catalog</h3>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="facebook_catalog_enabled" id="facebook_catalog_enabled" {% if integrations.facebook_catalog.enabled %}checked{% endif %} class="sr-only peer">
                                    <div class="w-9 h-5 bg-gray-300 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gold rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pink"></div>
                                </label>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div>
                                    <label for="facebook_catalog_id" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Catalog ID</label>
                                    <input type="text" id="facebook_catalog_id" name="facebook_catalog_id" value="{{ integrations.facebook_catalog.config.catalog_id if integrations.facebook_catalog.config else '' }}" placeholder="Catalog ID" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                                <div>
                                    <label for="facebook_catalog_access_token" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Access Token</label>
                                    <input type="password" id="facebook_catalog_access_token" name="facebook_catalog_access_token" placeholder="{% if integrations.facebook_catalog.config and integrations.facebook_catalog.config.access_token %}Enter new token{% else %}Enter token{% endif %}" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                                <div>
                                    <label for="facebook_catalog_pixel_id" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Pixel ID (Optional)</label>
                                    <input type="text" id="facebook_catalog_pixel_id" name="facebook_catalog_pixel_id" value="{{ integrations.facebook_catalog.config.pixel_id if integrations.facebook_catalog.config else '' }}" placeholder="Pixel ID" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                                <div>
                                    <label for="facebook_business_manager_id" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Business Manager ID (Optional)</label>
                                    <input type="text" id="facebook_business_manager_id" name="facebook_business_manager_id" value="{{ integrations.facebook_catalog.config.business_manager_id if integrations.facebook_catalog.config else '' }}" placeholder="Business Manager ID" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pinterest Catalog -->
                        <div class="bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg p-4 hover:border-gold/30 transition-theme shadow-sm dark:shadow-none">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center font-bold text-white text-xs">P</div>
                                    <div>
                                        <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Pinterest Catalog</h3>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="pinterest_catalog_enabled" id="pinterest_catalog_enabled" {% if integrations.pinterest_catalog.enabled %}checked{% endif %} class="sr-only peer">
                                    <div class="w-9 h-5 bg-gray-300 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gold rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pink"></div>
                                </label>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div>
                                    <label for="pinterest_catalog_id" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Catalog ID</label>
                                    <input type="text" id="pinterest_catalog_id" name="pinterest_catalog_id" value="{{ integrations.pinterest_catalog.config.catalog_id if integrations.pinterest_catalog.config else '' }}" placeholder="Catalog ID" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                                <div>
                                    <label for="pinterest_catalog_access_token" class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Access Token</label>
                                    <input type="password" id="pinterest_catalog_access_token" name="pinterest_catalog_access_token" placeholder="{% if integrations.pinterest_catalog.config and integrations.pinterest_catalog.config.access_token %}Enter new token{% else %}Enter token{% endif %}" class="w-full px-3 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold font-mono text-xs transition-theme">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="pt-6 border-t border-gray-200 dark:border-gray-800 flex justify-end">
            <button type="submit" class="px-6 py-2.5 bg-pink hover:bg-pink-dark text-white font-medium rounded-lg transition-colors">Save Changes</button>
        </div>
    </form>
</div>
{% endblock %}
